<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Case study: discovering an interoperability issue</title>
	<link href="../../css/main.css" rel="stylesheet">
	<link href="../../node_modules/prismjs/themes/prism.css" rel="stylesheet">
</head>
<body>

	<h1>Case study: discovering an interoperability issue</h1>

	<p>This is a run-through of one developers approach to Test the Web Forward.
	It will show you ways you can be involved, some of the challenges you may face, and the reward at the end.</p>


	<h2>Scenario</h2>

	<p><code class="language-markup">&lt;label contenteditable="true"&gt;My label&lt;/label&gt;</code> behaves differently in Firefox.</p>

	<p>I discovered this when testing out an editing interface for a product at work.
	Searching lead me to this question on stackoverflow (<a href="http://stackoverflow.com/questions/13611904/contenteditable-on-label-tag-does-not-work-in-firefox
	">Contenteditable on label tag does not work in firefox</a>) and this bug report (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=853519">Bug 853519 - contenteditable does not work properly on &lt;label&gt; elements</a>).</p>

	<p><strong>Inconsistent behaviour is the perfect opportunity to test the web forward!</strong></p>


	<h2>Make a plan</h2>

	<ol>
		<li>check the web specification for <code class="language-markup">LABEL</code> and <code class="language-markup">contenteditable</code></li>
		<li>check browser behaviour</li>
		<li>review existing tests in Test the Web Forward</li>
		<li>write a new test</li>
		<li>determine where to add the test</li>
		<li>submit the test</li>
	</ol>


	<h2>Check the spec</h2>

	<p>I started with reading up on both the <code>label</code> element and the <code>contenteditable</code> attribute.
	This was difficult.
	The spec is vague about the "activation behaviour" of labels
	(because it is different for text fields and checkboxes, and might be platform dependent), and the editing API is in draft and doesn't talk too specifically about what happens when you click (or activate) an editable element.</p>

	<p>I didn't come out of this with a clear understanding of what should happen. I'm going to create a test case and check more browsers.</p>


	<h3>Learnings</h3>
	<ul>
		<li><dfn>activation behaviour</dfn>: the fancy name for "what happens when you click on the something" (Of course, elements can be activated with the keyboard, voice commands, etc. It is not all about clicks, so the official term is not specifically about clicks.)</li>
		<li>interactive content does not include editable elements</li>
	</ul>


	<h3>References</h3>
	<ul>
		<li><a href="https://html.spec.whatwg.org/multipage/forms.html#the-label-element">The <code>label</code> element</a>
			<ul>
				<li><a href="https://html.spec.whatwg.org/multipage/dom.html#interactive-content-2">Interactive content</a></li>
			</ul>
		</li>
		<li><a href="https://html.spec.whatwg.org/multipage/interaction.html#contenteditable">Making document regions editable: The <code>contenteditable</code> content attribute</a>
			<ul>
				<li><a href="https://html.spec.whatwg.org/multipage/interaction.html#editable">Editing APIs</a></li>
				<li><a href="https://dvcs.w3.org/hg/editing/raw-file/tip/editing.html">HTML Editing APIs</a></li>
			</ul>
		</li>
	</ul>


	<h2>Check browser behaviour</h2>

	<p>I created a quick demo page:</p>
	<p data-height="428" data-theme-id="3818" data-slug-hash="MwPXMq" data-default-tab="result" data-user="bboyle" class='codepen'>See the Pen <a href='http://codepen.io/bboyle/pen/MwPXMq/'>label@contenteditable tests</a> by Ben Boyle (<a href='http://codepen.io/bboyle'>@bboyle</a>) on <a href='http://codepen.io'>CodePen</a>.</p>
	<script async src="//assets.codepen.io/assets/embed/ei.js"></script>

	<p>I'm not seeing any difference in behaviour in Firefox and Chrome.
	It appears that a single click on the <code>label</code> puts the focus on the associated text field in both browsers.
	A click-and-drag action selects text in the <code>label</code> and it can then be edited.
	Likewise, it is possible to <kbd>Tab</kbd> between the <code>label</code> and <code>input</code> control.</p>

	<p>In IE11 however, a single-click keeps the focus on the <code>label</code> element.</p>

	<p>That isn't the bug I was looking for, but it's still an inconsistency and worth adding a test for.</p>

	<p>The orphaned label behaves the same on all 3 browsers.</p>


	<h2>Review existing tests</h2>


<script src="../../node_modules/prismjs/prism.js"></script>

</body>
</html>
